<!DOCTYPE html>
<html>
<head>
<title>curve_cmd</title>
</head>
<body>
<table align="center">
midid:<input id="midid" type="text", value="4311290111"></br>
slaveid:<input id="slaveid" type="text", value=""></br>
Dry: <input id="dry" type="text", value=""></br>
Wet: <input id="wet" type="text", value=""></br>
TIme:<input id="time" type="text", value=""></br>
<input type="button", onClick="buttonEvt(this)" value="OK">
</table>
</body>
<script type="text/javascript">

function buttonEvt(btn)
{
	var curveCmd = [];
	
	curveCmd = '{"slaveid":"' + document.getElementById("slaveid").value + '", "midid":"' + document.getElementById("slaveid").value + '","data":[';
	curveCmd = curveCmd + '[' + document.getElementById("dry").value + '],';
	curveCmd = curveCmd + '[' + document.getElementById("wet").value + '],';
	curveCmd = curveCmd + '[' + document.getElementById("time").value + ']]}';


	alert(curveCmd);
	
	sendHttpReq("post", "curve_cmd", curveCmd);
	
	alert("send ok!");
}

//XmlHttpRequest对象    
function createXmlHttpRequest()
{    
    if(window.ActiveXObject) //如果是IE浏览器 
    {    
        return new ActiveXObject("Microsoft.XMLHTTP");    
    }
    else if(window.XMLHttpRequest) //非IE浏览器  
    {     	
        return new XMLHttpRequest();    
    }    
}  

function sendHttpReq(method, url, data)
{	
	var httpRequest = createXmlHttpRequest();
	var text;
	var tmp = " ";

	httpRequest.abort();
	httpRequest.open(method, url, false);

	httpRequest.send(data);

	text = httpRequest.responseText;
	
	delete httpRequest;
	
	return text;
}

</script>
</html>












